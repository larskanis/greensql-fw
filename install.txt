Installation

One of the simple ways to install greensql SQL firewall is to build a
package for yout OS. We have a special script that does the whole
process. We support deb/rpm/bsd packages. Just run the following commands:

  shell> cd greensql-fw
  shell> ./build.sh

This script will create package for your OS. After installing this package
you need to create configuration db by running the following command:

  shell> greensql-create-db.sh


MANUAL INSTALLATION

The are a number of steps to perform in order to install application.
They are:

1. Create dedicated user for greensql service
2. Creating MySQL config db and a db user.
3. Setting up configuration files.
3. Setting log file.
4. Configure start up scripts


Creating greensql system group and user
---------------------------------------

In order to create greensql group and user run the following
commands (run these commands as a root user):

  groupadd greensql
  useradd -M -g greensql -s /dev/null greensql

Alternatively you can run the following commands:
  
  cd scripts/
  ./setup_user.sh


Creating MySQL DB and user
--------------------------
Just run the following script: greensql-create-db.sh . It will
automatically create configuration database.

  cd scripts/
  ./greensql-create-db.sh

Setting up configuration files
------------------------------

You will find a number of configuration files in the ./conf/ directory.
GreenSQL start up script expect to find configuration files in the
following directory:

/etc/greensql/

Setting up configuration files is simple. Just run the following commands:

mkdir -p /etc/greensql
cp ./conf/* /etc/greensql/ -r
chown greensql:greensql /etc/greensql -R
chmod 700 /etc/greensql

Alternativly you can run setup_conf.sh file located in the scripts 
directory.

You need to alter greensql.conf file and specify db settings.


Setting log file
----------------

By default greensql expects to find log file in:

/var/log/greensql.log

In addition log file rotation must be configured.
Run the following commands:

touch /var/log/greensql.log
chown greensql:greensql /var/log/greensql.log
chmod 600 /var/log/greensql.log
cp greensql.rotate /etc/logrotate.d/greensql

Alternatively you can run ./setup_log.sh script located
in the scripts/ directory.


Configure start up scripts
--------------------------

As a final step you need to copy greensql application to the /user/sbin/
or /sbin directory, copy service initialization file to the /etc/init.d/
directory.

Please do the following:
 
 cp greensql-fw /usr/sbin/
 cd scripts
 cp rc.greensql /etc/init.d/greensql

Another alternative is to run ./setup_binary.sh script located in the scripts/
directory.


After that you can start the application. Simply type:

 /etc/init.d/greensql start

In order to stop the application use the following command:

 /etc/init.d/greensql stop


